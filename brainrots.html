<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rdn Store</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial,sans-serif}
body{background:#000;color:#fff}

/* TOP */
.top-bar{
  background:#8b0000;
  padding:10px;
  text-align:center;
  font-weight:bold;
}

/* HEADER */
.header{
  padding:15px;
  background:#111;
  border-bottom:2px solid #8b0000;
}
.logo{
  color:#ff2e2e;
  font-size:26px;
  font-weight:bold;
  cursor:pointer;
}

/* GRID */
.products{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:20px;
  padding:20px;
}
.card{
  background:#111;
  border:1px solid #8b0000;
  border-radius:15px;
  overflow:hidden;
  position:relative;
}
.card img{
  width:100%;
  height:140px;
  object-fit:cover;
}
.card-content{padding:15px}
.price{color:#ff2e2e;font-weight:bold}
.stock{font-size:12px;margin-top:5px}
.buy-btn{
  margin-top:10px;
  width:100%;
  padding:8px;
  background:#8b0000;
  border:none;
  color:white;
  border-radius:8px;
  font-weight:bold;
  cursor:pointer;
}
.buy-btn:disabled{opacity:.5}

/* ESGOTADO */
.sold-out{
  position:absolute;
  inset:0;
  background:rgba(0,0,0,.85);
  display:flex;
  justify-content:center;
  align-items:center;
  font-size:22px;
  font-weight:bold;
  color:red;
}

/* ADMIN */
#adminLogin,#adminPanel{
  position:fixed;
  inset:0;
  background:#000c;
  display:none;
  align-items:center;
  justify-content:center;
  z-index:999;
}
.admin-box{
  background:#111;
  padding:20px;
  border:2px solid #8b0000;
  border-radius:12px;
  width:280px;
}
.admin-panel{
  position:fixed;
  bottom:10px;
  left:10px;
  background:#111;
  border:2px solid #8b0000;
  padding:12px;
  border-radius:12px;
  width:260px;
  z-index:999;
}
.admin-panel input,.admin-panel select{
  width:100%;
  margin:5px 0;
  padding:6px;
}
</style>
</head>

<body>

<div class="top-bar">Rdn Store Oficial ðŸ”¥</div>
<div class="header">
  <div class="logo" id="logo">Rdn Store</div>
</div>

<div class="products" id="products"></div>

<!-- LOGIN ADMIN -->
<div id="adminLogin">
  <div class="admin-box">
    <h3 style="text-align:center;color:#ff2e2e">ADMIN</h3>
    <input type="password" id="adminPass" placeholder="Senha">
    <button class="buy-btn" onclick="loginAdmin()">Entrar</button>
  </div>
</div>

<!-- PAINEL -->
<div class="admin-panel" id="adminPanel" style="display:none">
  <h3 style="text-align:center;color:#ff2e2e">ADMIN</h3>

  <select id="selectProd"></select>
  <input id="nome" placeholder="Nome">
  <input id="preco" type="number" placeholder="PreÃ§o">
  <input id="estoque" type="number" placeholder="Estoque">
  <input id="img" type="file" accept="image/*">

  <button class="buy-btn" onclick="criar()">âž• Criar</button>
  <button class="buy-btn" onclick="editar()">ðŸ’¾ Salvar</button>
  <button class="buy-btn" onclick="apagar()">ðŸ—‘ Apagar</button>
</div>

<script>
const SENHA = "rdn555";
const whatsapp = "5581995367131";

let produtos = JSON.parse(localStorage.getItem("produtos")) || [];
let pedidos = JSON.parse(localStorage.getItem("pedidos")) || [];

function salvar(){
  localStorage.setItem("produtos",JSON.stringify(produtos));
  localStorage.setItem("pedidos",JSON.stringify(pedidos));
  render();
  carregarAdmin();
}

function render(){
  const div = document.getElementById("products");
  div.innerHTML="";
  produtos.forEach((p,i)=>{
    div.innerHTML+=`
    <div class="card">
      ${p.estoque<=0?'<div class="sold-out">ESGOTADO</div>':''}
      <img src="${p.img}">
      <div class="card-content">
        <div>${p.nome}</div>
        <div class="price">R$${p.preco}</div>
        <div class="stock">${p.estoque>0?'Restam '+p.estoque:'Produto esgotado'}</div>
        <button class="buy-btn" ${p.estoque<=0?'disabled':''}
          onclick="comprar(${i})">Comprar</button>
      </div>
    </div>`;
  });
}

function comprar(i){
  produtos[i].estoque--;
  pedidos.push({produto:produtos[i].nome,preco:produtos[i].preco,data:new Date()});
  salvar();
  window.open(`https://wa.me/${whatsapp}?text=Pedido:%20${produtos[i].nome}`,"_blank");
}

/* ADMIN */
let clicks=0;
logo.onclick=()=>{
  clicks++;
  if(clicks===5){
    adminLogin.style.display="flex";
    clicks=0;
  }
};

function loginAdmin(){
  if(adminPass.value===SENHA){
    adminLogin.style.display="none";
    adminPanel.style.display="block";
    carregarAdmin();
  }else alert("Senha errada");
}

function carregarAdmin(){
  selectProd.innerHTML="";
  produtos.forEach((p,i)=>{
    selectProd.innerHTML+=`<option value="${i}">${p.nome}</option>`;
  });
}

function criar(){
  const file = img.files[0];
  if(!file) return alert("Selecione uma imagem");
  const reader = new FileReader();
  reader.onload=()=>{
    produtos.push({
      nome:nome.value,
      preco:preco.value,
      estoque:estoque.value,
      img:reader.result
    });
    salvar();
  };
  reader.readAsDataURL(file);
}

function editar(){
  const i = selectProd.value;
  produtos[i].nome = nome.value;
  produtos[i].preco = preco.value;
  produtos[i].estoque = estoque.value;
  salvar();
}

function apagar(){
  produtos.splice(selectProd.value,1);
  salvar();
}

render();
</script>

</body>
</html>
