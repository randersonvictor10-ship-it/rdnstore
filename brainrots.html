<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RDN STORE - Brainrots</title>
<style>
body {background:#000;color:white;font-family:Arial,sans-serif;overflow-x:hidden;margin:0;}
.header{padding:15px;text-align:center;font-size:24px;font-weight:bold;color:#ff2e2e;text-shadow:0 0 10px red;}
.products{display:grid;grid-template-columns:repeat(4,1fr);gap:15px;padding:20px;}
.card{background:#111;border:2px solid #8b0000;border-radius:15px;overflow:hidden;position:relative;transition:0.3s;}
.card img{width:100%;height:150px;object-fit:cover;border-bottom:2px solid #8b0000;}
.card-content{padding:10px;}
.price{color:#ff2e2e;font-weight:bold;margin-top:5px;}
.stock{color:#00ff88;margin-top:2px;font-size:12px;}
.buy-btn{margin-top:10px;width:100%;padding:8px;background:#8b0000;border:none;color:white;border-radius:10px;font-weight:bold;cursor:pointer;transition:0.3s;}
.buy-btn:hover{background:#ff2e2e;box-shadow:0 0 15px #ff2e2e,0 0 30px #ff2e2e;}
.modal{position:fixed;inset:0;background:rgba(0,0,0,.85);display:none;align-items:center;justify-content:center;z-index:999;}
.modal-box{background:#111;border:2px solid #8b0000;padding:20px;border-radius:16px;width:280px;text-align:center;}
</style>
</head>
<body>

<div class="header">RDN STORE - Brainrots ðŸ”¥</div>
<div class="products" id="products"></div>

<!-- Modal Compra -->
<div class="modal" id="buyModal">
  <div class="modal-box">
    <h3 style="color:#ff2e2e">Finalizar compra</h3>
    <button class="buy-btn" onclick="finalizar('zap')">WhatsApp</button>
    <button class="buy-btn" onclick="finalizar('ig')">Instagram</button>
    <button class="buy-btn" onclick="buyModal.style.display='none'">Cancelar</button>
  </div>
</div>

<!-- Firebase -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.6.1/firebase-app.js";
import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.6.1/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyAkOwU1T92cz1stmo1-VwcXE_nIDp-sk-M",
  authDomain: "rdn-store.firebaseapp.com",
  databaseURL: "https://rdn-store-default-rtdb.firebaseio.com",
  projectId: "rdn-store",
  storageBucket: "rdn-store.firebasestorage.app",
  messagingSenderId: "29377893404",
  appId: "1:29377893404:web:927e49e5f97c0f2368bbd9",
  measurementId: "G-CQWRHTJB29"
};

// Inicializa Firebase
const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

// Links de compra
const zap = "https://wa.me/5581995367131";
const ig = "https://instagram.com/rdn.store.ofc";

// ReferÃªncia produtos no DB
const produtosRef = ref(db, "produtos");
const productsDiv = document.getElementById("products");
let produtoAtual = null;

// Renderiza produtos em tempo real
onValue(produtosRef, (snapshot) => {
  const data = snapshot.val() || [];
  productsDiv.innerHTML = "";
  Object.keys(data).forEach((key,i)=>{
    const p = data[key];
    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `
      <img src="${p.img}">
      <div class="card-content">
        <div>${p.nome}</div>
        <div class="price">R$${p.preco}</div>
        <div class="stock">Stock: 1</div>
        <button class="buy-btn" onclick="abrirCompra('${key}')">Comprar</button>
      </div>
    `;
    productsDiv.appendChild(card);
  });
});

// Modal
const buyModal = document.getElementById("buyModal");
function abrirCompra(key){produtoAtual=key;buyModal.style.display="flex";}
function finalizar(tipo){
  if(!produtoAtual) return;
  produtosRef.child(produtoAtual);
  buyModal.style.display="none";
  const msg = `ðŸ›’ Produto comprado: ${produtoAtual}`;
  if(tipo==="zap"){window.open(`${zap}?text=${encodeURIComponent(msg)}`,"_blank");}
  else{window.open(ig,"_blank");}
}
</script>

</body>
</html>