<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rdn Store</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial;}
body{background:#000;color:white;}
.top-bar{background:#8b0000;padding:10px;text-align:center;font-weight:bold;}
.header{display:flex;justify-content:space-between;padding:15px;background:#111;border-bottom:2px solid #8b0000;}
.logo{color:#ff2e2e;font-size:22px;font-weight:bold;animation:neon 1.5s infinite alternate;}
@keyframes neon{from{text-shadow:0 0 5px red;}to{text-shadow:0 0 20px red,0 0 40px red;}}
.products{display:grid;grid-template-columns:1fr 1fr;gap:15px;padding:20px;}
.card{background:#111;border:1px solid #8b0000;border-radius:15px;overflow:hidden;position:relative;}
.card img{width:100%;height:140px;object-fit:cover;}
.card-content{padding:15px;}
.price{color:#ff2e2e;font-weight:bold;}
.stock{font-size:12px;margin-top:5px;}
.buy-btn{margin-top:10px;width:100%;padding:8px;background:#8b0000;border:none;color:white;border-radius:8px;cursor:pointer;}
.sold-out{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.85);display:none;justify-content:center;align-items:center;color:red;font-size:22px;}
.cart{position:fixed;right:-350px;top:0;width:300px;height:100%;background:#111;padding:15px;box-shadow:-2px 0 10px rgba(255,0,0,0.5);transition:0.4s ease;overflow-y:auto;z-index:999;}
.cart.active{right:0;}
.cart-header{display:flex;justify-content:space-between;align-items:center;}
.close-btn{background:none;border:none;color:red;font-size:18px;cursor:pointer;}
.cart-item{display:flex;justify-content:space-between;margin-bottom:8px;background:#1a1a1a;padding:6px;border-radius:6px;}
.remove-btn{background:none;border:none;color:red;cursor:pointer;}
</style>
</head>

<body>

<div class="top-bar">Rdn Store Oficial ðŸ”¥</div>

<div class="header">
  <div class="logo">Rdn Store</div>
  <button onclick="toggleCart()">ðŸ›’</button>
</div>

<div class="products" id="products"></div>

<!-- ================== CARRINHO ================== -->
<div class="cart" id="cart">
  <div class="cart-header">
    <h2>Carrinho</h2>
    <button class="close-btn" onclick="fecharCarrinho()">âœ–</button>
  </div>

  <div id="cartItems"></div>
  <h3 id="total">Total: R$0</h3>

  <button onclick="abrirCheckout()" class="buy-btn">
    Ir para compra
  </button>
</div>

<!-- ================== CHECKOUT ================== -->
<div id="checkout" style="
  display:none;
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:#000;
  z-index:2000;
  padding:20px;
  overflow-y:auto;
">

  <h2 style="color:#ff2e2e;text-align:center;">Finalizar compra</h2>

  <div id="checkoutItems" style="margin-top:20px;"></div>

  <h3 id="checkoutTotal" style="margin-top:15px;"></h3>

  <button onclick="finalizarCompra()" style="
    width:100%;
    margin-top:15px;
    padding:12px;
    background:#8b0000;
    color:white;
    border:none;
    border-radius:10px;
    font-size:16px;
  ">
    Finalizar no WhatsApp
  </button>

  <button onclick="fecharCheckout()" style="
    width:100%;
    margin-top:10px;
    padding:10px;
    background:#111;
    color:white;
    border:1px solid #8b0000;
    border-radius:10px;
  ">
    Voltar
  </button>
</div>

<script>
/* âš ï¸ USE APENAS UMA VEZ SE PRECISAR RESETAR ESTOQUE */
// localStorage.clear();

/* ================== VARIÃVEIS ================== */
const productsDiv = document.getElementById("products");
let cart = [];
let total = 0;

/* CONFIG */
const telefoneWhatsApp = "5581995367131";

/* ESTOQUES INICIAIS */
const estoques = [1,0,0,0,0,0,0,0,0,0];

/* PRODUTOS */
const produtos = [
  { nome:"la romantic 1,4b", preco:55, img:"brainrot1.png" },
  { nome:"Brainrot 1,2b", preco:50, img:"brainrot2.png" },
  { nome:"Brainrot 1,0b", preco:45, img:"brainrot3.png" },
  { nome:"Brainrot 900m", preco:40, img:"brainrot4.png" },
  { nome:"Brainrot 800m", preco:35, img:"brainrot5.png" },
  { nome:"Brainrot 700m", preco:30, img:"brainrot6.png" },
  { nome:"Brainrot 600m", preco:28, img:"brainrot7.png" },
  { nome:"Brainrot 500m", preco:25, img:"brainrot8.png" },
  { nome:"Brainrot 400m", preco:22, img:"brainrot9.png" },
  { nome:"Brainrot 300m", preco:20, img:"brainrot10.png" }
];

/* CRIAR PRODUTOS */
produtos.forEach((produto, i) => {

  if(localStorage.getItem("stock"+i) === null){
    localStorage.setItem("stock"+i, estoques[i]);
  }

  productsDiv.innerHTML += `
    <div class="card">
      <div class="sold-out" id="sold${i}">ESGOTADO</div>
      <img src="images/${produto.img}">
      <div class="card-content">
        <div>${produto.nome}</div>
        <div class="price">R$${produto.preco}</div>
        <div class="stock" id="stock${i}"></div>
        <button class="buy-btn" onclick="buy(${i})">Comprar</button>
      </div>
    </div>
  `;

  updateStock(i);
});

/* ESTOQUE */
function updateStock(i){
  const stock = parseInt(localStorage.getItem("stock"+i));
  const el = document.getElementById("stock"+i);
  const sold = document.getElementById("sold"+i);

  if(stock > 0){
    el.innerText = "Restam " + stock + " unidades";
    el.style.color = "#00ff88";
    sold.style.display = "none";
  } else {
    el.innerText = "Produto esgotado";
    el.style.color = "red";
    sold.style.display = "flex";
  }
}

/* COMPRAR */
function buy(i){
  let stock = parseInt(localStorage.getItem("stock"+i));
  if(stock > 0){
    localStorage.setItem("stock"+i, stock - 1);
    updateStock(i);

    cart.push({
      id: i,
      nome: produtos[i].nome,
      preco: produtos[i].preco
    });

    total += produtos[i].preco;
    updateCart();
  }
}

/* CARRINHO */
function updateCart(){
  const cartItems = document.getElementById("cartItems");
  cartItems.innerHTML = "";

  cart.forEach((item, index) => {
    cartItems.innerHTML += `
      <div class="cart-item">
        ${item.nome}
        <button class="remove-btn" onclick="removeItem(${index})">ðŸ—‘</button>
      </div>
    `;
  });

  document.getElementById("total").innerText =
    "Total: R$" + total.toFixed(2);
}

/* REMOVER ITEM */
function removeItem(index){
  const item = cart[index];
  localStorage.setItem("stock"+item.id,
    parseInt(localStorage.getItem("stock"+item.id)) + 1
  );
  updateStock(item.id);

  total -= item.preco;
  cart.splice(index, 1);
  updateCart();
}

/* CHECKOUT */
function abrirCheckout(){
  if(cart.length === 0){
    alert("Carrinho vazio!");
    return;
  }
  fecharCarrinho();
  document.getElementById("checkout").style.display = "block";

  const area = document.getElementById("checkoutItems");
  area.innerHTML = "";

  cart.forEach(item => {
    area.innerHTML += `
      <div style="background:#111;padding:10px;border-radius:8px;border:1px solid #8b0000;margin-bottom:8px;">
        ${item.nome} â€” R$${item.preco}
      </div>
    `;
  });

  document.getElementById("checkoutTotal").innerText =
    "Total: R$" + total.toFixed(2);
}

function fecharCheckout(){
  document.getElementById("checkout").style.display = "none";
}

/* FINALIZAR */
function finalizarCompra(){
  let msg = "ðŸ›’ *NOVO PEDIDO - Rdn Store*%0A%0A";
  cart.forEach(item=>{
    msg += `â€¢ ${item.nome} - R$${item.preco}%0A`;
  });
  msg += `%0AðŸ’° Total: R$${total.toFixed(2)}`;

  window.open(`https://wa.me/${telefoneWhatsApp}?text=${msg}`, "_blank");

  cart = [];
  total = 0;
  updateCart();
  fecharCheckout();
}

/* UI */
function toggleCart(){ document.getElementById("cart").classList.toggle("active"); }
function fecharCarrinho(){ document.getElementById("cart").classList.remove("active"); }
</script>

</body>
</html>
