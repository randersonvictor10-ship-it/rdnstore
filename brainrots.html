<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Loja Brainrots</title>
</head>
<body>

<h1>Loja Brainrots</h1>

<div id="products"></div>

<script>

const productsDiv = document.getElementById("products");
let cart = [], total = 0;

/* 10 PRODUTOS */
const produtos = [
  { nome: "Brainrot 1,4b", preco: 55, img: "brainrot1.png", estoque: 5 },
  { nome: "Brainrot 1,2b", preco: 50, img: "brainrot2.png", estoque: 4 },
  { nome: "Brainrot 1,0b", preco: 45, img: "brainrot3.png", estoque: 3 },
  { nome: "Brainrot 900m", preco: 40, img: "brainrot4.png", estoque: 6 },
  { nome: "Brainrot 800m", preco: 35, img: "brainrot5.png", estoque: 5 },
  { nome: "Brainrot 700m", preco: 30, img: "brainrot6.png", estoque: 4 },
  { nome: "Brainrot 600m", preco: 28, img: "brainrot7.png", estoque: 3 },
  { nome: "Brainrot 500m", preco: 25, img: "brainrot8.png", estoque: 5 },
  { nome: "Brainrot 400m", preco: 22, img: "brainrot9.png", estoque: 2 },
  { nome: "Brainrot 300m", preco: 20, img: "brainrot10.png", estoque: 7 }
];

produtos.forEach((produto, index) => {

  if (localStorage.getItem("stock" + index) === null) {
    localStorage.setItem("stock" + index, produto.estoque);
  }

  productsDiv.innerHTML += `
    <div style="border:1px solid #ccc; padding:10px; margin:10px;">
      <h3>${produto.nome}</h3>
      <p>Pre√ßo: R$${produto.preco}</p>
      <p id="stock${index}"></p>
      <button onclick="buy(${index})">Comprar</button>
    </div>
  `;

  updateStock(index);
});

function updateStock(id) {
  let stock = parseInt(localStorage.getItem("stock" + id));
  document.getElementById("stock" + id).innerText =
    stock > 0 ? "Restam " + stock + " unidades" : "Produto esgotado";
}

function buy(id) {
  let stock = parseInt(localStorage.getItem("stock" + id));
  if (stock > 0) {
    stock--;
    localStorage.setItem("stock" + id, stock);
    updateStock(id);
  }
}

</script>

</body>
</html>
