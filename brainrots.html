<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rdn Store</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial,sans-serif;}
body{background:#000;color:white;overflow-x:hidden;position:relative;}
.top-bar{background:#8b0000;padding:12px;text-align:center;font-weight:bold;font-size:18px;text-shadow:0 0 8px red;}
.header{display:flex;justify-content:space-between;align-items:center;padding:15px;background:#111;border-bottom:2px solid #8b0000;}
.logo{color:#ff2e2e;font-size:28px;font-weight:bold;cursor:pointer;text-shadow:0 0 10px red;animation:neon 1.5s infinite alternate;}
@keyframes neon{0%{text-shadow:0 0 5px red;}50%{text-shadow:0 0 15px red,0 0 25px red;}100%{text-shadow:0 0 20px red,0 0 40px red;}}

/* CUPOM PEQUENO */
#cupom-container{position:absolute;top:60px;right:20px;display:flex;gap:6px;}
#cupom-container input{padding:4px;border-radius:4px;border:none;width:80px;font-size:10px;}
#cupom-container button{padding:4px;border-radius:4px;border:none;background:#ff2e2e;color:white;font-size:10px;cursor:pointer;}
#cupomMsg{color:#ff2e2e;font-size:10px;align-self:center;margin-left:4px;}

/* PRODUTOS 2X2 */
.products{display:grid;grid-template-columns:1fr 1fr;gap:20px;padding:15px;}
.card{background:#111;border:1px solid #8b0000;border-radius:15px;overflow:hidden;position:relative;box-shadow:0 0 10px rgba(255,0,0,0.4);transition:0.3s;}
.card:hover{box-shadow:0 0 25px rgba(255,0,0,0.8);}
.card img{width:100%;height:140px;object-fit:cover;border-bottom:1px solid #8b0000;}
.card-content{padding:10px;}
.price{color:#ff2e2e;font-weight:bold;font-size:14px;margin-top:4px;}
.stock{font-size:10px;margin-top:2px;color:#00ff88;}
.buy-btn{margin-top:6px;width:100%;padding:6px;background:#8b0000;border:none;color:white;border-radius:6px;cursor:pointer;font-weight:bold;transition:0.3s;font-size:12px;}
.buy-btn:hover{background:#ff2e2e;box-shadow:0 0 15px #ff2e2e,0 0 30px #ff2e2e;}
.buy-btn:disabled{opacity:0.5;background:#333;}
.sold-out{position:absolute;inset:0;background:rgba(0,0,0,0.85);display:flex;align-items:center;justify-content:center;font-size:16px;color:#ff2e2e;font-weight:bold;text-transform:uppercase;}

/* MODAL COMPRA */
.modal{position:fixed;inset:0;background:rgba(0,0,0,0.85);display:none;align-items:center;justify-content:center;z-index:999;}
.modal-box{background:#111;border:2px solid #8b0000;padding:18px;border-radius:14px;width:260px;text-align:center;animation:fadeIn 0.3s;}
@keyframes fadeIn{0%{opacity:0;transform:scale(0.9);}100%{opacity:1;transform:scale(1);}}

/* ADMIN */
#adminLogin{position:fixed;inset:0;background:rgba(0,0,0,.9);display:none;align-items:center;justify-content:center;z-index:1000;}
.admin-box{background:#111;padding:22px;border:2px solid #8b0000;border-radius:14px;width:280px;text-align:center;}
.admin-box input{width:100%;padding:6px;margin:6px 0;border-radius:6px;border:none;background:#000;color:white;}

.admin-panel{position:fixed;bottom:15px;left:15px;background:#111;border:2px solid #8b0000;padding:10px;border-radius:14px;width:320px;z-index:999;display:none;}
.admin-panel h3{text-align:center;color:#ff2e2e;margin-bottom:6px;}
.admin-panel input,.admin-panel select{width:100%;margin:4px 0;padding:6px;border-radius:6px;border:none;background:#000;color:#fff;}
.admin-panel label{font-size:12px;display:flex;gap:6px;align-items:center;margin:3px 0;}
.small-btn{font-size:11px;padding:4px;margin-top:4px;cursor:pointer;}

/* HIST칍RICO */
#historico{max-height:100px;overflow-y:auto;background:#111;border:1px solid #8b0000;padding:6px;border-radius:6px;margin-top:6px;font-size:11px;color:#fff;}
#historico-btn{padding:4px 6px;font-size:11px;margin-top:4px;background:#8b0000;border:none;color:white;border-radius:6px;cursor:pointer;}

/* HIST칍RICO EDIT츼VEL */
#editarHistorico input,#editarHistorico select{width:48%;margin:2px 1%;padding:4px;font-size:11px;}

/* AVALIA칂칏ES MIN칈MAS */
#avaliacoes{margin:5px;padding:2px;text-align:left;font-size:7px;line-height:1;color:#ff5555;overflow-y:auto;}
#avaliacoes .avaliacao{margin-bottom:2px;}
#avaliacoes .avaliacao strong{color:#ff2e2e;}

/* FUNDO */
body::before{
  content:"";position:fixed;inset:0;background:url('');background-size:cover;background-position:center;opacity:0.05;z-index:-1;
}
</style>
</head>
<body>

<div class="top-bar">Rdn Store Oficial 游댠</div>
<div class="header">
  <div class="logo" id="logo">Rdn Store</div>
</div>

<!-- CUPOM -->
<div id="cupom-container">
  <input type="text" id="cupomInput" placeholder="Cupom">
  <button onclick="aplicarCupom()">OK</button>
  <span id="cupomMsg"></span>
</div>

<div class="products" id="products"></div>

<!-- MODAL COMPRA -->
<div class="modal" id="buyModal">
  <div class="modal-box">
    <h3 style="color:#ff2e2e">Finalizar compra</h3>
    <button class="buy-btn" onclick="finalizar('zap')">WhatsApp</button>
    <button class="buy-btn" onclick="finalizar('ig')">Instagram</button>
    <button class="buy-btn small-btn" onclick="buyModal.style.display='none'">Cancelar</button>
  </div>
</div>

<!-- ADMIN LOGIN -->
<div id="adminLogin">
  <div class="admin-box">
    <h3 style="color:#ff2e2e">ADMIN</h3>
    <input type="password" id="adminPass" placeholder="Senha">
    <button class="buy-btn" onclick="loginAdmin()">Entrar</button>
  </div>
</div>

<!-- ADMIN PANEL -->
<div class="admin-panel" id="adminPanel">
  <h3>ADMIN</h3>
  <select id="selectProd"></select>
  <input id="nome" placeholder="Nome do produto">
  <input id="preco" type="number" placeholder="Pre칞o">
  <input id="estoque" type="number" placeholder="Estoque">
  <label><input type="checkbox" id="infinito"> Estoque infinito</label>
  <label><input type="checkbox" id="forcarEsgotado"> For칞ar esgotado</label>
  <input id="img" type="file">
  <button class="buy-btn" onclick="criar()">Criar</button>
  <button class="buy-btn" onclick="editar()">Salvar</button>
  <button class="buy-btn" onclick="apagar()">Apagar</button>
  <button class="buy-btn small-btn" onclick="sairAdmin()">Sair</button>

  <h4 style="color:#ff2e2e;margin-top:8px;">Hist칩rico de Vendas (<span id="contRef">0</span>)</h4>
  <button id="historico-btn" onclick="zerarHistorico()">Zerar Hist칩rico</button>
  <div id="historico"></div>

  <!-- EDITAR HIST칍RICO -->
  <div id="editarHistorico" style="margin-top:6px;">
    <select id="selectHistorico"></select>
    <input type="text" id="editarProduto" placeholder="Produto">
    <input type="number" id="editarPreco" placeholder="Pre칞o">
    <input type="text" id="editarData" placeholder="Data">
    <button class="buy-btn small-btn" onclick="salvarEdicaoHistorico()">Salvar Altera칞칚o</button>
  </div>
</div>

<!-- AVALIA칂칏ES -->
<div id="avaliacoes"></div>

<script>
const ADMIN_SENHA="randerson555";
const zap="https://wa.me/5581995367131";
const ig="https://instagram.com/rdn.store.ofc";

let produtos=JSON.parse(localStorage.produtos||"[]");
let historico=JSON.parse(localStorage.historico||"[]");
let produtoAtual=null;
let cupomAtivo=false;

// FUN칂칏ES PRINCIPAIS
function salvar(){
  localStorage.produtos=JSON.stringify(produtos);
  localStorage.historico=JSON.stringify(historico);
  render();carregarAdmin();atualizarHistorico();
}

function render(){
  products.innerHTML="";
  produtos.forEach((p,i)=>{
    const esgotado=p.forcarEsgotado || (!p.infinito && p.estoque<=0);
    let precoFinal=p.preco;
    if(cupomAtivo) precoFinal=(p.preco*0.95).toFixed(2);
    products.innerHTML+=`
      <div class="card">
        ${esgotado?'<div class="sold-out">ESGOTADO</div>':''}
        <img src="${p.img}">
        <div class="card-content">
          <div>${p.nome}</div>
          <div class="price">R$${precoFinal}</div>
          <div class="stock">${p.infinito?'Infinito':'Estoque: '+p.estoque}</div>
          <button class="buy-btn" ${esgotado?'disabled':''} onclick="abrirCompra(${i})">Comprar</button>
        </div>
      </div>`;
  });
}

function abrirCompra(i){produtoAtual=i;buyModal.style.display="flex";}
function finalizar(tipo){
  const p=produtos[produtoAtual];
  if(!p.infinito)p.estoque--;
  const data=new Date().toLocaleString();
  historico.push({produto:p.nome,preco:p.preco,data});
  salvar();
  const msg=`游 Produto: ${p.nome} - R$${p.preco} - ${data}`;
  window.open(tipo==="zap"?`${zap}?text=${encodeURIComponent(msg)}`:`${ig}`,"_blank");
  buyModal.style.display="none";
}

// CUPOM
function aplicarCupom(){
  const c=cupomInput.value.trim().toUpperCase();
  if(c==="RDN5"){cupomAtivo=true;cupomMsg.innerText="5% OFF aplicado";render();}
  else{cupomAtivo=false;cupomMsg.innerText="Cupom inv치lido";render();}
}

// ADMIN
let clicks=0;
logo.onclick=()=>{if(++clicks==5){adminLogin.style.display="flex";clicks=0;}};
function loginAdmin(){if(adminPass.value===ADMIN_SENHA){adminLogin.style.display="none";adminPanel.style.display="block";carregarAdmin();}else alert("Senha errada");}
function sairAdmin(){adminPanel.style.display="none";adminPass.value="";}

function carregarAdmin(){
  selectProd.innerHTML="";
  produtos.forEach((p,i)=>selectProd.innerHTML+=`<option value="${i}">${p.nome}</option>`);
  atualizarHistorico();
}

selectProd.onchange=()=>{
  const p=produtos[selectProd.value];
  nome.value=p.nome;
  preco.value=p.preco;
  estoque.value=p.estoque;
  infinito.checked=p.infinito;
  forcarEsgotado.checked=p.forcarEsgotado;
}

function criar(){
  const r=new FileReader();
  r.onload=()=>{
    produtos.push({nome:nome.value,preco:+preco.value,estoque:+estoque.value,infinito:infinito.checked,forcarEsgotado:false,img:r.result});
    salvar();
  }
  r.readAsDataURL(img.files[0]);
}
function editar(){const i=selectProd.value;Object.assign(produtos[i],{nome:nome.value,preco:+preco.value,estoque:+estoque.value,infinito:infinito.checked,forcarEsgotado:forcarEsgotado.checked});salvar();}
function apagar(){produtos.splice(selectProd.value,1);salvar();}

// HIST칍RICO
const selectHistorico = document.getElementById("selectHistorico");
const editarProduto = document.getElementById("editarProduto");
const editarPreco = document.getElementById("editarPreco");
const editarData = document.getElementById("editarData");

function atualizarHistorico(){
  contRef.innerText = historico.length;
  document.getElementById("historico").innerHTML = historico.map(h => `${h.data} - ${h.produto} - R$${h.preco}`).join("<br>") || "Nenhuma venda ainda";
  
  selectHistorico.innerHTML = "";
  historico.forEach((h,i)=> selectHistorico.innerHTML += `<option value="${i}">${h.data} - ${h.produto}</option>`);
  if(historico.length > 0) preencherCamposHistorico();
}

selectHistorico.onchange = preencherCamposHistorico;
function preencherCamposHistorico(){
  const h = historico[selectHistorico.value];
  if(!h) return;
  editarProduto.value = h.produto;
  editarPreco.value = h.preco;
  editarData.value = h.data;
}

function salvarEdicaoHistorico(){
  const i = selectHistorico.value;
  if(historico[i]){
    historico[i].produto = editarProduto.value;
    historico[i].preco = +editarPreco.value;
    historico[i].data = editarData.value;
    salvar();
    alert("Hist칩rico atualizado!");
  }
}

function zerarHistorico(){
  if(confirm("Deseja realmente zerar o hist칩rico?")){
    historico=[];
    salvar();
  }
}

// AVALIA칂칏ES
const avals=[
  {nome:"Lucas",msg:"Excelente loja, recomendo!"},
  {nome:"Ana",msg:"Entrega r치pida e confi치vel."},
  {nome:"Carlos",msg:"Produtos de 칩tima qualidade."},
  {nome:"Maria",msg:"Pre칞o justo e atendimento top."},
  {nome:"Jo칚o",msg:"Sempre volto a comprar aqui."},
  {nome:"Beatriz",msg:"Super recomendo, 5 estrelas!"},
  {nome:"Pedro",msg:"Muito bom, adorei."},
  {nome:"Camila",msg:"Atendimento r치pido e eficiente."},
  {nome:"Rafael",msg:"Produtos incr칤veis!"},  
  {nome:"Fernanda",msg:"Amei, compra garantida."},
  {nome:"Bruno",msg:"Vale cada centavo."},
  {nome:"Juliana",msg:"Top demais!"},
  {nome:"Gustavo",msg:"Recomendo para todos."},
  {nome:"Patr칤cia",msg:"Muito satisfeito com a compra."},
  {nome:"Thiago",msg:"Tudo perfeito, obrigado!"}
];
function renderAvaliacoes(){
  avaliacoes.innerHTML="";
  avals.forEach(a=>avaliacoes.innerHTML+=`<div class="avaliacao"><strong>${a.nome}:</strong> ${a.msg}</div>`);
}

// INICIAL
render();
renderAvaliacoes();
</script>

</body>
</html>
